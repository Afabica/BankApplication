# Theory of Spring Boot

## Modifying Tags in Spring Boot

<mark>

In Spring Boot, modifying tags for metrics involves customizing the tags associated with default metrics or adding custom metrics with specific tags. This can be achieved by implementing a WebTagsProvider bean to add additional tags to the default metrics generated by Spring Boot's actuator.

For instance, to add custom tags to the default metrics, you can define a WebMvcTagsProvider.

</mark>

# Testing with `curl`

`curl -u username:password https://localhost:8443/api/login -k`
-k - allows insecure connection
-u username:password: Sends Http Basic Auth credentials.

`curl -X POST https://localhost:8443/login \
    -H "Content-Type: application/json" \
    -d '{"username":"jonny", "password":"Leopard1000"} \
    -k 
`

`curl -H "Authorization: Bearer <your_token>" https://localhost:8443/api/secure-end -k`

## Key generating with use of mkcert

`
mkcert -install`
`mkcert localhost 127.0.0.1 ::1`
`openssl pkcs12 -export -in localhost+2.pem -inkey localhost+2-key.pem -out local-ssl.p12 -name local-ssl -passout pass:Leopard1000
`

## Key creation with keytool

`keytool -genkeypair \
    -alis local-ssl \
    -keyalg RSA \
    -keysize 2048 \ 
    -storetype PKCS12 \
    -keystore local-ssl.p12 \
    -validity 365 \
    -storepass Leopard1000 \
    -keypass Leopard1000` - key generating

`openssl pkcs12 -in local-ssl.p12 -clcerts -nokeys -out certicficate.crt` - export the certificate
`openssl pkcs12 -in local-ssl.p12 -nocerts -nodes -out private-key.pem` export pem

`openssl pkcs12 -in local-ssl.p12 -nodes -out full.pem` - exporting both to one pem

`keytool -list -v -keystore local-ssl.p12 -storepass your-password` - verifying ssl key, it's command for showing all information about created ccertificate

`./gradlew bootRun --args='--spring.config.location=file:/absolute/path/to/application.properties'
` - starting applciation with argument like path t application properties

`openssl pkcs12 -in local-ssl.p12 -nocerts  -out private-key-decrypted.pem -nodes` - creating private key without encryption

`opebssl pkcs12 -in local-ssl.p12 -nocerts -out private-key.pem` - creating private key with encryption

## Kubernetes 

### Adding ssl certificate to tenant 
`kubectl create secret tls my-tls-secret --cert=tls-certificate.crt --key=private-key.pem --namespace=https-con` - creating of secret corresponding to ssl certificate
